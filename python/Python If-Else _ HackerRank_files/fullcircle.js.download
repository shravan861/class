/*
 @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   4.1.0+f046478d
*/
'use strict';(function(F,r){typeof exports==="object"&&typeof module!=="undefined"?module.exports=r():typeof define==="function"&&define.amd?define(r):F.ES6Promise=r()})(this,function(){function F(){return function(){return process.nextTick(C)}}function r(){return typeof X!=="undefined"?function(){X(C)}:q()}function R(){var c=0,h=new ca(C),l=document.createTextNode("");h.observe(l,{characterData:!0});return function(){l.data=c=++c%2}}function W(){var c=new MessageChannel;c.port1.onmessage=C;return function(){return c.port2.postMessage(0)}}
function q(){var c=setTimeout;return function(){return c(C,1)}}function C(){for(var c=0;c<M;c+=2)(0,N[c])(N[c+1]),N[c]=void 0,N[c+1]=void 0;M=0}function u(){try{var c=require("vertx");X=c.runOnLoop||c.runOnContext;return r()}catch(h){return q()}}function e(c,h){var l=arguments,n=this,w=new this.constructor(O);w[b]===void 0&&Q(w);var y=n._state;y?function(){var K=l[y-1];S(function(){return I(y,w,K,n._result)})}():A(n,w,c,h);return w}function G(c){if(c&&typeof c==="object"&&c.constructor===this)return c;
var h=new this(O);z(h,c);return h}function O(){}function aa(c){try{return c.then}catch(h){return k.error=h,k}}function P(c,h,l,n){try{c.call(h,l,n)}catch(w){return w}}function Y(c,h,l){S(function(n){var w=!1,y=P(l,h,function(K){w||(w=!0,h!==K?z(n,K):x(n,K))},function(K){w||(w=!0,p(n,K))},"Settle: "+(n._label||" unknown promise"));!w&&y&&(w=!0,p(n,y))},c)}function L(c,h){h._state===d?x(c,h._result):h._state===g?p(c,h._result):A(h,void 0,function(l){return z(c,l)},function(l){return p(c,l)})}function m(c,
h,l){h.constructor===c.constructor&&l===e&&h.constructor.resolve===G?L(c,h):l===k?(p(c,k.error),k.error=null):l===void 0?x(c,h):typeof l==="function"?Y(c,h,l):x(c,h)}function z(c,h){if(c===h)p(c,new TypeError("You cannot resolve a promise with itself"));else{var l=typeof h;h===null||l!=="object"&&l!=="function"?x(c,h):m(c,h,aa(h))}}function t(c){c._onerror&&c._onerror(c._result);J(c)}function x(c,h){c._state===f&&(c._result=h,c._state=d,c._subscribers.length!==0&&S(J,c))}function p(c,h){c._state===
f&&(c._state=g,c._result=h,S(t,c))}function A(c,h,l,n){var w=c._subscribers,y=w.length;c._onerror=null;w[y]=h;w[y+d]=l;w[y+g]=n;y===0&&c._state&&S(J,c)}function J(c){var h=c._subscribers,l=c._state;if(h.length!==0){for(var n,w,y=c._result,K=0;K<h.length;K+=3)n=h[K],w=h[K+l],n?I(l,n,w,y):w(y);c._subscribers.length=0}}function B(){this.error=null}function I(c,h,l,n){var w=typeof l==="function",y=void 0,K=void 0,ea=void 0,fa=void 0;if(w){try{y=l(n)}catch(ha){v.error=ha,y=v}y===v?(fa=!0,K=y.error,y.error=
null):ea=!0;if(h===y){p(h,new TypeError("A promises callback cannot return that same promise."));return}}else y=n,ea=!0;h._state===f&&(w&&ea?z(h,y):fa?p(h,K):c===d?x(h,y):c===g&&p(h,y))}function E(c,h){try{h(function(l){z(c,l)},function(l){p(c,l)})}catch(l){p(c,l)}}function Q(c){c[b]=da++;c._state=void 0;c._result=void 0;c._subscribers=[]}function T(c,h){this._instanceConstructor=c;this.promise=new c(O);this.promise[b]||Q(this.promise);ba(h)?(this._remaining=this.length=h.length,this._result=Array(this.length),
this.length===0?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(h),this._remaining===0&&x(this.promise,this._result))):p(this.promise,Error("Array Methods must be provided an Array"))}function D(c){this[b]=da++;this._result=this._state=void 0;this._subscribers=[];if(O!==c){if(typeof c!=="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof D)E(this,c);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}var U=void 0,ba=U=Array.isArray?Array.isArray:function(c){return Object.prototype.toString.call(c)==="[object Array]"},M=0,X=void 0,Z=void 0,S=function(c,h){N[M]=c;N[M+1]=h;M+=2;M===2&&(Z?Z(C):a())},H=(U=typeof window!=="undefined"?window:void 0)||{},ca=H.MutationObserver||H.WebKitMutationObserver;H=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var V=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!==
"undefined",N=Array(1E3),a=void 0;a=H?F():ca?R():V?W():U===void 0&&typeof require==="function"?u():q();var b=Math.random().toString(36).substring(16),f=void 0,d=1,g=2,k=new B,v=new B,da=0;T.prototype._enumerate=function(c){for(var h=0;this._state===f&&h<c.length;h++)this._eachEntry(c[h],h)};T.prototype._eachEntry=function(c,h){var l=this._instanceConstructor,n=l.resolve;n===G?(n=aa(c),n===e&&c._state!==f?this._settledAt(c._state,h,c._result):typeof n!=="function"?(this._remaining--,this._result[h]=
c):l===D?(l=new l(O),m(l,c,n),this._willSettleAt(l,h)):this._willSettleAt(new l(function(w){return w(c)}),h)):this._willSettleAt(n(c),h)};T.prototype._settledAt=function(c,h,l){var n=this.promise;n._state===f&&(this._remaining--,c===g?p(n,l):this._result[h]=l);this._remaining===0&&x(n,this._result)};T.prototype._willSettleAt=function(c,h){var l=this;A(c,void 0,function(n){return l._settledAt(d,h,n)},function(n){return l._settledAt(g,h,n)})};D.all=function(c){return(new T(this,c)).promise};D.race=
function(c){var h=this;return ba(c)?new h(function(l,n){for(var w=c.length,y=0;y<w;y++)h.resolve(c[y]).then(l,n)}):new h(function(l,n){return n(new TypeError("You must pass an array to race."))})};D.resolve=G;D.reject=function(c){var h=new this(O);p(h,c);return h};D._setScheduler=function(c){Z=c};D._setAsap=function(c){S=c};D._asap=S;D.prototype={constructor:D,then:e,"catch":function(c){return this.then(null,c)}};D.polyfill=function(){var c=void 0;if(typeof global!=="undefined")c=global;else if(typeof self!==
"undefined")c=self;else try{c=Function("return this")()}catch(n){throw Error("polyfill failed because global object is unavailable in this environment");}var h=c.Promise;if(h){var l=null;try{l=Object.prototype.toString.call(h.resolve())}catch(n){}if(l==="[object Promise]"&&!h.cast)return}c.Promise=D};D.Promise=D;D.polyfill();return D});
var fcdsc=function(){function F(){return new Promise(function(a,b){e("trackVisit");if(V)e("DST not tracking because visitor has opted out of tracking, exiting.");else if(N)e("This page visit has already been tracked, exiting.");else{var f=new W;f.load(window.location.href);var d=m("_fcdscv");if(!f.hasUtmData()){if(d){e("No UTM data in URL and cookie exists, exiting.");return}f.UtmSource="internal"}var g=new C;N=!0;d?(g.load(d),g.addVisit(f),g.save().then(function(k){e("Success! "+k.Message);g.resetAndSaveToCookie();
a(k.Message)},function(k){e("Failed!",k);N=!1;b(k)})):(e("getVisitorId"),L("https://st.fullcircleinsights.com/v1/visitors/create",JSON.stringify({CustomerId:"9e206b0d-0014-42b9-8d39-c2b9094a2731"})).then(function(k){k=JSON.parse(k.Message);e("VisitorId:"+k.VisitorId);g.Visitor=new q(null,k.VisitorId);g.saveToCookie();g.addVisit(f);g.save().then(function(v){e("Success! "+v.Message);g.resetAndSaveToCookie();a(v.Message)},function(v){e("Failed!",v);N=!1;b(v)})},function(k){console.error("Failed!",k);k="Error creating new visitor. "+
k+" Response: "+Z+" Page: "+window.location.pathname;g.DiagnosticMessage=k;e(k);N=!1;O(g)}))}})}function r(a){return new Promise(function(b,f){e("m_trackFormFill");if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a))if(V)e("DST not tracking because visitor has opted out of tracking, exiting.");else{var d=new C;if(p()){var g="trackFormFill cannot save because DoNotTrack is enabled";d.DiagnosticMessage=g;e(g);G(d,b,f)}else(g=m("_fcdscv"))?(d.load(g),d.Visitor.ExternalVisitorId?(d.Visitor=new q(a,d.Visitor.ExternalVisitorId),
d.Activities.push(new u("Form",a)),e("m_trackFormFill::vi: "+d.toString()),d.convert().then(function(k){e("m_trackFormFill::vi.convert response::"+k.Message);d.resetAndSaveToCookie();H="";t("_fcdsctmp","","");b(k.Message)},function(k){e("m_trackFormFill::vi.convert error::",k);f(k)})):(g="trackFormFill cannot save because there is no visitor id",d.DiagnosticMessage=g,e(g),G(d,b,f))):(g="trackFormFill cannot save because cookie does not exist or value is blank. Page: "+window.location.pathname,d.DiagnosticMessage=
g,e(g),G(d,b,f))}else e("Invalid email")})}function R(a){if(!a)return!1;for(var b="hackerrank.com".toString().split(","),f=0;f<b.length;f++)if(a.includes(b[f]))return!0;return!1}function W(){this.SessionStartTime=this.ReferrerPageRaw=this.ReferrerPage=this.UtmContent=this.UtmTerm=this.UtmCampaign=this.UtmMedium=this.UtmSource=this.UrlRaw=this.UrlPath=this.Email=this.Origin=this.VisitDateTime=null;this.load=function(a){this.VisitDateTime=P(new Date);this.SessionStartTime=aa();this.UrlPath=
encodeURIComponent(window.location.pathname);this.Origin=encodeURIComponent(window.location.hostname);this.UrlRaw=encodeURIComponent(window.location);a=a.split("?");if(a.length>1){a=a[1].split("&");for(var b=0;b<a.length;b++){var f=a[b].split("=");f[0]=="utm_source"?this.UtmSource=f[1]:f[0]=="utm_medium"?this.UtmMedium=f[1]:f[0]=="utm_campaign"?this.UtmCampaign=f[1]:f[0]=="utm_term"?this.UtmTerm=f[1]:f[0]=="utm_content"&&(this.UtmContent=f[1])}}if(document.referrer){if(b=document.referrer,a=encodeURIComponent(b),
this.ReferrerPageRaw=a.length>255?a.substring(0,255):a,a=document.createElement("a"),a.href=b,a=a.hostname,f=encodeURIComponent(a),this.ReferrerPage=f.length>255?f.substring(0,255):f,!this.hasUtmData()){b=b.split("?");if(b.length>1)for(f=b[1].split("&"),b=0;b<f.length;b++){var d=f[b].split("=");if(d[0]=="q"&&a.startsWith("www.bing.")){this.UtmTerm=d[1];break}}a.startsWith("www.bing.")?(this.UtmSource="bing",this.UtmMedium="organic"):a.startsWith("search.yahoo.")?(this.UtmSource="yahoo",this.UtmMedium=
"organic"):a.startsWith("www.google.")?(this.UtmSource="google",this.UtmMedium="organic"):a.startsWith("www.facebook.")?(this.UtmSource="facebook",this.UtmMedium="social"):a.startsWith("www.linkedin.")||a.startsWith("www.lnkd.")?(this.UtmSource="linkedin",this.UtmMedium="social"):a.startsWith("www.twitter.")||a.startsWith("t.co")?(this.UtmSource="twitter",this.UtmMedium="social"):R(a)||(this.UtmMedium="referral")}}else this.hasUtmData()||(this.UtmSource="direct")};this.loadFromJSON=function(a){this.VisitDateTime=
a.VisitDateTime;this.UrlPath=a.UrlPath;this.Origin=a.Origin;this.UrlRaw=a.UrlRaw;this.Email=a.Email;this.UtmSource=a.UtmSource;this.UtmMedium=a.UtmMedium;this.UtmCampaign=a.UtmCampaign;this.UtmTerm=a.UtmTerm;this.UtmContent=a.UtmContent;this.ReferrerPage=a.ReferrerPage;this.ReferrerPageRaw=a.ReferrerPageRaw};this.equals=function(a){return this.UtmSource==a.UtmSource&&this.UtmMedium==a.UtmMedium&&this.UtmCampaign==a.UtmCampaign&&this.UtmTerm==a.UtmTerm&&this.UtmContent==a.UtmContent};this.hasUtmData=
function(){return this.UtmSource!==null||this.UtmMedium!==null||this.UtmCampaign!==null||this.UtmTerm!==null||this.UtmContent!==null}}function q(a,b){this.Email=a;this.ExternalVisitorId=b}function C(){this.CustomerId="9e206b0d-0014-42b9-8d39-c2b9094a2731";this.Visitor=null;this.Visits=[];this.Activities=[];this.DiagnosticMessage=null;this.load=function(a){a=JSON.parse(a);this.CustomerId=a.CustomerId;this.Visitor=a.Visitor;this.Activities=a.Activities;this.DiagnosticMessage=a.DiagnosticMessage;for(var b=0;b<a.Visits.length;b++){var f=
new W;f.loadFromJSON(a.Visits[b]);this.Visits.push(f)}};this.addActivity=function(a){this.Activities.push(a)};this.addVisit=function(a){if(this.Visits.length!==0)for(var b=0;b<this.Visits.length;b++)if(this.Visits[b].equals(a))return;this.Visits.push(a)};this.save=function(){return L("https://st.fullcircleinsights.com/v1/visits/queue",JSON.stringify(this))};this.convert=function(){return L("https://st.fullcircleinsights.com/v1/visits/convert",JSON.stringify(this))};this.toString=function(){return JSON.stringify(this)};
this.encode=function(){return window.btoa(this.toString())};this.saveToCookie=function(){e("VisitInfo::saveToCookie");var a=this.toString();t("_fcdscv",a,730);e("VisitInfo::saveToCookie::vi: "+a)};this.reset=function(){e("VisitInfo::reset");this.Visits=[];this.Activities=[]};this.resetAndSaveToCookie=function(){e("VisitInfo::resetAndSaveToCookie");this.Visits=[];this.Activities=[];this.saveToCookie()};this.updateVisitsAfterForm=function(a){e("VisitInfo::updateVisitsAfterForm");this.Visits.length!==
0&&(this.Visits[this.Visits.length-1].Email=a)}}function u(a,b){this.ActivityDateTime=P(new Date);this.Type=a;this.UrlPath=encodeURIComponent(window.location.pathname);this.Email=b}function e(a){U&&console.log("FCDSC v1.0.60("+window.location.hostname+"): "+a)}function G(a,b,f){a.save().then(function(d){e("sendDiagnostic::vi.save response::"+d.Message);b(d.Message)},function(d){e("sendDiagnostic::vi.save error::",d);f(d)})}function O(a){a.save().then(function(b){e("sendDiagnostic::vi.save response::"+
b.Message)},function(b){e("sendDiagnostic::vi.save error::",b)})}function aa(){e("getSessionStartTime");var a=z("_fcdscst");if(!a)return e("Visit::getSessionStartTime: session cookie not found, using current date/time for SessionStartTime"),P(new Date);a=new Date(parseInt(a));return isNaN(a.getUTCFullYear())?(e("Visit::getSessionStartTime: invalid value found in session cookie, using current date/time for SessionStartTime"),P(new Date)):P(a)}function P(a){var b=a.getUTCFullYear().toString()+"-",f=
(a.getUTCMonth()+1).toString();f.length==1&&(f="0"+f);var d=a.getUTCDate().toString();d.length==1&&(d="0"+d);var g=a.getUTCHours().toString();g.length==1&&(g="0"+g);var k=a.getUTCMinutes().toString();k.length==1&&(k="0"+k);a=a.getUTCSeconds().toString();a.length==1&&(a="0"+a);return b+(f+"-"+d+" "+g+":"+k+":"+a)}function Y(a,b){return new Promise(function(f,d){function g(){var v=new XMLHttpRequest;v.open("POST",a);v.setRequestHeader("x-api-key","RT713FfPf71d2PCEhGR0GaL9SuNRT44UsLvKuDM1");v.setRequestHeader("origin-fci",
window.location.origin);v.setRequestHeader("js-version","1.0.60");v.onload=function(){e("post::Status: "+v.status);v.status==200?v.response==""||typeof v.response==="undefined"?d(Error("Empty response. User agent: "+navigator.userAgent)):f(v.response):d(Error(v.statusText))};v.onerror=function(){k<5?(k++,g()):(Z=v.response,d(Error("Network errors. Origin: "+self.origin+" User agent: "+navigator.userAgent)))};v.send(b)}e("post");var k=0;g()})}function L(a,b){return Y(a,b).then(function(f){Z=f;return JSON.parse(f)})}
function m(a){a+="=";for(var b=decodeURIComponent(document.cookie).split(";"),f=0;f<b.length;f++){for(var d=b[f];d.charAt(0)==" ";)d=d.substring(1);if(d.indexOf(a)===0)return window.atob(d.substring(a.length,d.length))}return""}function z(a){a+="=";for(var b=decodeURIComponent(document.cookie).split(";"),f=0;f<b.length;f++){for(var d=b[f];d.charAt(0)==" ";)d=d.substring(1);if(d.indexOf(a)===0){a=d.substring(a.length,d.length);try{return a=window.atob(a)}catch(g){return a}}}return""}function t(a,b,
f){var d=new Date;d.setTime(d.getTime()+f*24*60*60*1E3);f="expires="+d.toUTCString();document.cookie=a+"="+window.btoa(b)+";"+f+";domain=hackerrank.com;path=/;SameSite=Lax"}function x(a,b){document.cookie=a+"="+window.btoa(b)+";domain=hackerrank.com;path=/;SameSite=Lax"}function p(){if(!S||S=="false")return!1;const a=window.doNotTrack||window.navigator.doNotTrack||window.navigator.msDoNotTrack;return a?a.charAt(0)==="1"||a==="yes"?(e("DoNotTrack is enabled, exiting"),!0):!1:!1}
function A(){e("getForms");for(var a=document.getElementsByTagName("form"),b=0;b<a.length;b++){e("form: "+a[b].id);var f=!ca||ca=="false";if(a[b].classList&&a[b].classList.contains("fcidstform"))if(document.getElementById(M)&&a[b].contains(document.getElementById(M)))document.getElementById(M).addEventListener("change",fcdsc.handleEmailFieldChange);else if(a[b].getElementsByTagName("input").length>0&&a[b].getElementsByTagName("input")[M])a[b].getElementsByTagName("input")[M].addEventListener("change",
fcdsc.handleEmailFieldChange);else for(var d=a[b].getElementsByTagName("input"),g=0;g<d.length;g++)if(d[g].type==M){d[g].value&&(H=d[g].value);d[g].addEventListener("change",fcdsc.handleEmailFieldChange);break}(a[b].className==="elq-form"||a[b].action&&typeof a[b].action==="string"&&a[b].action.includes("eloqua")||a[b].className.includes("eloqua-form")||a[b].className.includes("elq-form"))&&f&&(X=!1,a[b].addEventListener("submit",fcdsc.handleSubmit,!1));if(a[b].id==="pardot-form")for(g=0;g<a[b].childNodes.length;g++)if(a[b].childNodes[g].classList&&
(a[b].childNodes[g].classList.contains("form-field")||a[b].childNodes[g].classList.contains("form-group"))&&a[b].childNodes[g].classList.contains("email"))for(var k=0;k<a[b].childNodes[g].childNodes.length;k++)if(a[b].childNodes[g].childNodes[k].nodeName.toLowerCase()=="input"){a[b].childNodes[g].childNodes[k].value&&f&&(H=a[b].childNodes[g].childNodes[k].value,a[b].addEventListener("submit",fcdsc.handleSubmit,!1));e("adding change event listener to email field id: "+a[b].childNodes[g].childNodes[k].id);
a[b].childNodes[g].childNodes[k].addEventListener("change",fcdsc.handleEmailFieldChange);break}if(a[b].className==="elq-form"||a[b].action&&typeof a[b].action==="string"&&a[b].action.includes("eloqua")||a[b].className.includes("eloqua-form")||a[b].className.includes("elq-form"))for(d=a[b].getElementsByTagName("input"),g=0;g<d.length;g++)if(d[g].name=="emailAddress"){d[g].value&&(H=d[g].value);e("adding change event listener to email field id: "+d[g].id);d[g].addEventListener("change",fcdsc.handleEmailFieldChange);
break}if(a.item(b).classList&&(a.item(b).classList.contains("mktoForm")||a.item(b).classList.contains("marketo-form")||a.item(b).classList.contains("marketo")))for(e("reached mktoForm block"),d=a[b].getElementsByTagName("input"),g=0;g<d.length;g++)if(d[g].id.startsWith("Email")||d[g].name.startsWith("Email")||d[g].classList&&d[g].classList.contains("mktoEmailField")){d[g].value&&(e("prefilledEmail: "+d[g].value),H=d[g].value);e("adding change event listener to Marketo email field");d[g].addEventListener("change",
fcdsc.handleEmailFieldChange);break}if(a[b].id&&typeof a[b].id==="string"&&a[b].id.indexOf("gform")===0)for(d=a[b].getElementsByTagName("input"),g=0;g<d.length;g++)d[g].parentElement.classList.contains("ginput_container_email")&&(d[g].value&&(H=d[g].value),e("adding change event listener to email field id: "+d[g].id),d[g].addEventListener("change",fcdsc.handleEmailFieldChange))}a=document.getElementsByClassName("pardot-form");for(b=0;b<a.length;b++){var v=a[b].getElementsByTagName("form");for(g=0;g<
v.length;g++)for(d=v[g].getElementsByTagName("input"),k=0;k<d.length;k++)d[k].name.includes("email")&&(d[k].value&&f&&(H=d[k].value,v[g].addEventListener("submit",fcdsc.handleSubmit,!1)),e("adding change event listener to Pardot email field"),d[k].addEventListener("change",fcdsc.handleEmailFieldChange))}f=document.getElementsByClassName("cta-form");for(b=0;b<f.length;b++)for(d=f[b].getElementsByTagName("form"),g=0;g<d.length;g++)if(k=d[g].querySelector("[data-mapping='email']"))k.value&&(H=k.value),
e("adding change event listener to Uberflip email field"),k.addEventListener("change",fcdsc.handleEmailFieldChange)}function J(a){e("m_handleSubmit");var b=null,f=a.currentTarget;try{a.preventDefault();e("form id: "+f.id);if(H)b=H;else{if(f.id==="pardot-form")for(var d=0;d<f.childNodes.length;d++)if(f.childNodes[d].classList&&f.childNodes[d].classList.contains("form-field")&&f.childNodes[d].classList.contains("email"))for(a=0;a<f.childNodes[d].childNodes.length;a++)if(f.childNodes[d].childNodes[a].nodeName.toLowerCase()==
"input"){var g=f.childNodes[d].childNodes[a].id;e("email field id: "+g);b=f.elements.namedItem(g).value;break}if(f.className==="elq-form"||f.action&&typeof f.action==="string"&&f.action.includes("eloqua")||f.className.includes("eloqua-form")||f.className.includes("elq-form")){var k=f.getElementsByTagName("input");for(d=0;d<k.length;d++)if(k[d].name=="emailAddress"){e("email field id: "+k[d].id);b=k[d].value;break}}if(f.id&&typeof f.id==="string"&&f.id.indexOf("gform")===0){k=f.getElementsByTagName("input");
for(d=0;d<k.length;d++)if(k[d].parentElement.classList.contains("ginput_container_email")){e("email field id: "+k[d].id);e("email field value: "+k[d].value);b=k[d].value;break}if(b){setTimeout(function(){r(b)},500);f.submit();return}}f.classList.contains("fcidstform")&&document.getElementById("email")&&f.contains(document.getElementById("email"))&&(b=document.getElementById("email").value)}b?X?setTimeout(function(){r(b)},500):window==window.top?E(b):parent.postMessage('{ "sender" : "fcdsc", "type": "setuppendingsave", "email" : "'+
b+'"}',"*"):e("could not find email field/value");f.submit()}catch(v){f.submit()}}function B(a){e("m_handleSubmitHS");var b=null,f=null;if(a=a.target.tagName.toLowerCase()==="form"?a.target:a.target.form){for(var d=0;d<a.elements.length;d++)a.elements[d].name&&a.elements[d].name.toLowerCase()==="email"&&(b=a.elements[d].value),a.elements[d].name&&a.elements[d].name.toLowerCase()==="hs_context"&&(f=JSON.parse(a.elements[d].value));b?f?f.redirectUrl||f.originalEmbedContext&&f.originalEmbedContext.redirectUrl||
!X?E(b):setTimeout(function(){r(b)},500):e("could not find hs_context"):e("could not find email field/value")}else e("could not find form element for this event")}function I(){e("m_checkForPendingSave");if(window==window.top){var a=m("_fcdsctmp");e("email: "+a);a?(t("_fcdsctmp","",""),r(a)):e("email cookie _fcdsctmp not present, exiting")}else parent.postMessage('{ "sender" : "fcdsc", "type": "checkforpendingsave" }',"*")}function E(a){e("m_setupPendingSave");V?e("DST not tracking because visitor has opted out of tracking, exiting."):
t("_fcdsctmp",a,1)}function Q(a){e("m_setupPendingMultiSave");V?e("DST not tracking because visitor has opted out of tracking, exiting."):t("_fcdscms",a,1)}function T(a,b){try{e("m_handleSubmitMkto");if(!H)return e("prefilledEmail variable is blank, so trackFormFill must have already been called. Exiting"),!0;e("values: "+JSON.stringify(a));e("followUpUrl: "+b);b=H;a&&a.Email&&(b=a.Email);e("email: "+b);r(b).then(function(f){e("m_handleSubmitMkto success");return!0},function(f){e("m_handleSubmitMkto error");
return!0})}catch(f){}return!0}function D(a){e("m_addMutationObservers");a&&typeof a==="string"&&(ba=a);if(ba!=="NO_DYNAMIC_NODES"){a=ba.toString().split(",");var b=new MutationObserver(function(g){for(let k of g)k.type==="childList"&&fcdsc.getForms()}),f={attributes:!1,childList:!0,subtree:!0};if(a.length>0){var d=null;for(let g of a){if(g==="FCI-ALL"){document.body?(e("adding mutation observer to body"),b.observe(document.body,f)):e("cannot add mutation observer to body because it has not rendered yet");
break}d=document.getElementById(g);d!=null&&b.observe(d,f)}}}}var U=false,ba="NO_DYNAMIC_NODES",M="email",X=!0,Z="placeholder",S=true,H="",ca=false,V=!1,N=!1;return{init:function(){var a=void 0;a=window.location.href;var b="l".replace(/[\[\]]/g,"\\$&");b=(new RegExp("[?&]"+b+"(=([^&#]*)|&|#|$)")).exec(a);(b?b[2]?decodeURIComponent(b[2].replace(/\+/g," ")):"":null)==="fcidevqa"&&(U=!0);V||z("_fcdscblock")?
(e("DST not tracking because visitor has opted out of tracking."),V=!0):(a=z("_fcdscst"),b=new Date,a?(a=new Date(parseInt(a)),a.setMinutes(a.getMinutes()+parseInt("60"))<b&&x("_fcdscst",b.getTime().toString())):x("_fcdscst",b.getTime().toString()))},isValidOrigin:function(a){return R(a)},trackVisit:function(){return F()},getForms:function(){A()},handleSubmit:function(a){J(a)},handleSubmitHS:function(a){B(a)},handleEmailFieldChange:function(a){e("m_handleEmailFieldChange");
a=a.target.value;e("email: "+a);/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?(window==window.top?E(a):parent.postMessage('{ "sender" : "fcdsc", "type": "setuppendingsave", "email" : "'+a+'"}',"*"),r(a)):e("Invalid email")},setEmailFieldId:function(a){e("m_setEmailFieldId");a&&(M=a)},setNoRedirect:function(a){e("m_setNoRedirect");typeof a=="boolean"&&(X=a)},handleSubmitMkto:function(a,b){return T(a,b)},receiveMessage:function(a){e("m_receiveMessage");e("event.data: "+a.data);e("event.origin: "+a.origin);if(typeof a.data==
"string")try{var b=JSON.parse(a.data);if(a.data.includes("pageId")){var f=a.data;e("m_handleSubmitUnbounce");var d=f.split("&");f=null;for(var g=0;g<d.length;g++){var k=d[g].split("=");k[0].replace(/['"]+/g,"")=="pageId"&&(f=k[1])}if(f){var v=document.getElementsByName("pageId");if(v[0].value==f){var da=v[0].parentElement,c=document.getElementById("email");if(da.contains(c)===!1)e("email element is not part of correct form");else if(c.nodeName.toLowerCase()!="input")e("email element is not input, exiting");
else{var h=c.value;h?E(h):e("could not find email field/value")}}}}a.data.includes("mktoReady")&&b.mktoReady&&A();if(b.sender&&b.sender==="fcdsc"){var l=b.type.toLowerCase();l==="trackformfill"&&r(b.email);l==="setuppendingsave"&&E(b.email);l==="setuppendingmultisave"&&Q(b.email);l==="checkforpendingsave"&&I()}}catch(n){e("error in m_receiveMessage: "+n)}},checkForPendingSave:function(){I()},setupPendingSave:function(a){E(a)},setupPendingMultiSave:function(a){Q(a)},trackFormFill:function(a){return r(a)},
log:function(a){e(a)},addMutationObservers:function(a){D(a)},isDoNotTrackEnabled:function(){return p()},hasPrefilledEmail:function(){var a=H?!0:!1;return a},trackingOptIn:function(){e("m_trackingOptIn");V=!1;z("_fcdscblock")&&t("_fcdscblock","",-1);fcdscLoad()},trackingOptOut:function(a){e("m_trackingOptOut");V=!0;m("_fcdscv")&&t("_fcdscv","",-1);m("_fcdsctmp")&&t("_fcdsctmp","",-1);m("_fcdscms")&&t("_fcdscms","",-1);z("_fcdscst")&&t("_fcdscst","",-1);N=!1;a&&x("_fcdscblock","1")}}}();
function fcdscLoad(){fcdsc.init();if(fcdsc.isValidOrigin(window.location.hostname)){fcdsc.getForms();fcdsc.checkForPendingSave();fcdsc.addMutationObservers();window==window.top&&(typeof MktoForms2!=="undefined"&&fcdsc.hasPrefilledEmail()&&MktoForms2.whenReady(function(r){r.onSuccess(fcdsc.handleSubmitMkto)}),window.addEventListener("message",fcdsc.receiveMessage,!1),window.addEventListener("hsvalidatedsubmit",fcdsc.handleSubmitHS,!1),fcdsc.isDoNotTrackEnabled()||fcdsc.trackVisit());var F=new CustomEvent("fcdscOnLoad");
window.dispatchEvent(F)}else console.log("FCDSC: not a valid origin, exiting")}window.addEventListener?window.addEventListener("load",fcdscLoad,!1):window.attachEvent&&window.attachEvent("onload",fcdscLoad);typeof MktoForms2!=="undefined"&&window==window.top&&MktoForms2.whenReady(fcdscLoad);String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(F,r){pos=r>0?r|0:0;return this.substring(pos,pos+F.length)===F}});
String.prototype.includes||(String.prototype.includes=function(F,r){typeof r!=="number"&&(r=0);return r+F.length>this.length?!1:this.indexOf(F,r)!==-1});"".trim||(String.prototype.trim=function(){return this.replace(/^[\s\ufeff]+|[\s\ufeff]+$/g,"")});
(function(F){F.DOMException||((DOMException=function(q){this.message=q}).prototype=Error());var r=/[\11\12\14\15\40]/,R=0,W=function(q,C){if(C==="")throw new DOMException("Failed to execute '"+q+"' on 'DOMTokenList': The token provided must not be empty.");if((R=C.search(r))!==-1)throw new DOMException("Failed to execute '"+q+"' on 'DOMTokenList': The token provided ('"+C[R]+"') contains HTML space characters, which are not valid in tokens.");};typeof DOMTokenList!=="function"&&function(q){function C(){if(!Y)throw TypeError("Illegal constructor");
}function u(){var m=q.event,z=m.propertyName;if(!L&&(z==="className"||z==="classList"&&!P)){m=m.srcElement;var t=m[" uCLp"],x=""+m[z],p=x.trim().split(r),A=m[z==="classList"?" uCL":"classList"],J=t.length,B=0,I=t.length=p.length;t=0;a:for(;B!==I;++B){for(var E=0;E!==B;++E)if(p[E]===p[B]){t++;continue a}A[B-t]=p[B]}for(B=I-t;B<J;++B)delete A[B];z==="classList"&&(L=1,m.classList=A,m.className=x,L=0,A.length=p.length-t)}}function e(m){if(!(m&&"innerHTML"in m))throw TypeError("Illegal invocation");m.detachEvent("onpropertychange",
u);Y=1;try{(function(){}).prototype=new C}finally{Y=0}var z=protoObj.prototype,t=new protoObj,x=m.className.trim().split(r),p=0,A=x.length,J=0;a:for(;p!==A;++p){for(var B=0;B!==p;++B)if(x[B]===x[p]){J++;continue a}this[p-J]=x[p]}z.length=A-J;z.value=m.className;z[" uCL"]=m;P?(P(m,"classList",{enumerable:1,get:function(){return t},configurable:0,set:function(I){L=1;m.className=z.value=I+="";L=0;var E=I.trim().split(r);I=z.length;var Q=0,T=z.length=E.length,D=0;a:for(;Q!==T;++Q){for(var U=0;U!==Q;++U)if(E[U]===
E[Q]){D++;continue a}t[Q-D]=E[Q]}for(E=T-D;E<I;++E)delete t[E]}}),P(m," uCLp",{enumerable:0,configurable:0,writeable:0,value:protoObj.prototype}),P(z," uCL",{enumerable:0,configurable:0,writeable:0,value:m})):(m.classList=t,m[" uCL"]=t,m[" uCLp"]=protoObj.prototype);m.attachEvent("onpropertychange",u)}var G=q.document,O=q.Object,aa=O.prototype.hasOwnProperty,P=O.defineProperty,Y=0,L=0;C.prototype.toString=C.prototype.toLocaleString=function(){return this.value};C.prototype.add=function(){var m=0,
z=arguments.length,t=this[" uCL"],x=t[" uCLp"];a:for(;m!==z;++m){var p=arguments[m]+"";W("add",p);for(var A=0,J=x.length,B=p;A!==J;++A)if(this[A]===p)continue a;else B+=" "+this[A];this[J]=p;x.length+=1;x.value=B}L=1;t.className=x.value;L=0};C.prototype.remove=function(){for(var m=0,z=arguments.length,t,x=this[" uCL"],p=x[" uCLp"];m!==z;++m){t=arguments[m]+"";W("remove",t);for(var A=0,J=p.length,B="",I=0;A!==J;++A)I?this[A-1]=this[A]:this[A]!==t?B+=this[A]+" ":I=1;I&&(delete this[J],--p.length,p.value=
B)}L=1;x.className=p.value;L=0};q.DOMTokenList=C;try{q.Object.defineProperty(q.Element.prototype,"classList",{enumerable:1,get:function(m){aa.call(this,"classList")||e(this);return this.classList},configurable:0,set:function(m){this.className=m}})}catch(m){q[" uCL"]=e,G.documentElement.firstChild.appendChild(G.createElement("style")).styleSheet.cssText='_*{x-uCLp:expression(!this.hasOwnProperty("classList")&&window[" uCL"](this))}[class]{x-uCLp/**/:expression(!this.hasOwnProperty("classList")&&window[" uCL"](this))}'}}(F);
(function(q,C){q.item||(q.item=function(u){u=this[u];return u===void 0?null:u});q.toggle&&C.toggle("a",0)===!1||(q.toggle=function(u){if(arguments.length>1)return this[arguments[1]?"add":"remove"](u),!!arguments[1];var e=this.value;return this.remove(e),e===this.value&&(this.add(u),!0)});q.replace&&typeof C.replace("a","b")==="boolean"||(q.replace=function(u,e){W("replace",u);W("replace",e);var G=this.value;return this.remove(u),this.value!==G&&(this.add(e),!0)});q.contains||(q.contains=function(u){for(var e=
0,G=this.length;e!==G;++e)if(this[e]===u)return!0;return!1});q.forEach||(q.forEach=function(u){if(arguments.length===1)for(var e=0,G=this.length;e!==G;++e)u(this[e],e,this);else{e=0;G=this.length;for(var O=arguments[1];e!==G;++e)u.call(O,this[e],e,this)}});q.entries||(q.entries=function(){var u=0,e=this;return{next:function(){return u<e.length?{value:[u,e[u++]],done:!1}:{done:!0}}}});q.values||(q.values=function(){var u=0,e=this;return{next:function(){return u<e.length?{value:e[u++],done:!1}:{done:!0}}}});
q.keys||(q.keys=function(){var u=0,e=this;return{next:function(){return u<e.length?{value:u++,done:!1}:{done:!0}}}})})(F.DOMTokenList.prototype,F.document.createElement("div").classList)})(window);(function(){if(typeof window.CustomEvent==="function")return!1;window.CustomEvent=function(F,r){r=r||{bubbles:!1,cancelable:!1,detail:null};var R=document.createEvent("CustomEvent");R.initCustomEvent(F,r.bubbles,r.cancelable,r.detail);return R}})();fcdscLoad();